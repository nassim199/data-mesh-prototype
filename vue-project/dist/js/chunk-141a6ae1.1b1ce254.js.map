{"version":3,"sources":["webpack:///./src/components/FormLayoutDemo.vue?b027","webpack:///./src/components/FormLayoutDemo.vue","webpack:///./src/components/FormLayoutDemo.vue?46b0"],"names":["class","_createElementVNode","for","_createElementBlock","_createVNode","_component_Dialog","visible","$data","$event","breakpoints","style","width","position","footer","_component_Button","label","onClick","$options","fontSize","color","_hoisted_3","_hoisted_7","onSubmit","_ctx","$invalid","_component_InputText","id","name","$model","$pending","$response","_toDisplayString","required","$message","replace","_component_Textarea","description","aria-describedby","_component_Dropdown","options","optionLabel","_hoisted_16","_component_TreeSelect","onNodeSelect","_hoisted_19","_component_MultiSelect","filter","placeholder","_hoisted_22","_component_ToggleButton","onIcon","offIcon","disabled","_hoisted_25","_hoisted_27","type","setup","v$","useVuelidate","data","format","selectedFolder","selectedDPs","checked","externalSource","hasNotebook","submitted","externalSourceLink","formats","code","dataProducts","folders","showMessage","selectedNode","acteur","acteurStore","validations","methods","handleSubmit","isFormValid","this","axios","method","url","nom","formatData","dateCreation","Date","selectedIds","map","dp","_id","isExternal","headers","authorization","token","then","toggleDialog","catch","error","console","log","resetForm","generateFolders","tree","f","children","c","key","node","created","router","res","__exports__","render"],"mappings":"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","file":"js/chunk-141a6ae1.1b1ce254.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./FormLayoutDemo.vue?vue&type=style&index=0&id=14a5fc93&lang=scss&scoped=true\"","<template>\n    <div class=\"form-demo\">\n        <Dialog v-model:visible=\"showMessage\" :breakpoints=\"{ '960px': '80vw' }\" :style=\"{ width: '30vw' }\" position=\"top\">\n            <div class=\"flex align-items-center flex-column pt-6 px-3\">\n                <i class=\"pi pi-check-circle\" :style=\"{fontSize: '5rem', color: 'var(--green-500)' }\"></i>\n                <h5>Data Product added successfully !</h5>\n            </div>\n            <template #footer>\n                <div class=\"flex justify-content-center\">\n                    <Button label=\"OK\" @click=\"toggleDialog\" class=\"p-button-text\" />\n                </div>\n            </template>\n        </Dialog>\n\n        <div class=\"flex justify-content-center\">\n            <div class=\"card\">\n                <h5 class=\"text-center\">Add Data Product</h5>\n                <form @submit.prevent=\"handleSubmit(!v$.$invalid)\" class=\"p-fluid\">\n                    <div class=\"field\">\n                        <div class=\"p-float-label\">\n                            <InputText id=\"name\" v-model=\"v$.name.$model\" :class=\"{'p-invalid':v$.name.$invalid && submitted}\" />\n                            <label for=\"name\" :class=\"{'p-error':v$.name.$invalid && submitted}\">Name*</label>\n                        </div>\n                        <small v-if=\"(v$.name.$invalid && submitted) || v$.name.$pending.$response\" class=\"p-error\">{{v$.name.required.$message.replace('Value', 'Name')}}</small>\n                    </div>\n                    <div class=\"field\">\n                        <div class=\"p-float-label\">\n                            <Textarea id=\"description\" v-model=\"v$.description.$model\" :class=\"{'p-invalid':v$.description.$invalid && submitted}\" aria-describedby=\"description-error\"/>\n                            <label for=\"description\" :class=\"{'p-error':v$.description.$invalid && submitted}\">description*</label>\n                        </div>\n\t\t\t\t\t\t<small v-if=\"(v$.description.$invalid && submitted) || v$.description.$pending.$response\" class=\"p-error\">{{v$.description.required.$message.replace('Value', 'Name')}}</small>\n                    </div>\n                    <div class=\"field\">\n                        <div class=\"p-float-label\">\n                            <Dropdown id=\"format\" v-model=\"format\" :options=\"formats\" optionLabel=\"name\" />\n                            <label for=\"format\">Format</label>\n                        </div>\n                    </div> \n\t\t\t\t\t<div class=\"field\">\n\t\t\t\t\t\t<div class=\"p-float-label\">\n\t\t\t\t\t\t\t<TreeSelect id=\"folder\" v-model=\"selectedNode\" :options=\"folders\" @node-select=\"onNodeSelect\"/>\n\t\t\t\t\t\t\t<label for=\"folder\">Folder</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"field\">\n\t\t\t\t\t\t<MultiSelect id=\"previous_dps\" v-model=\"selectedDPs\" :options=\"dataProducts\" :filter=\"true\" optionLabel=\"nom\" placeholder=\"Data Products Used\"/>\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"field\">\n\t\t\t\t\t\t<label for=\"checked\">External Source</label>\n\t\t\t\t\t\t<ToggleButton id=\"checked\" v-model=\"checked\"  onIcon=\"pi pi-check\" offIcon=\"pi pi-times\"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"field\">\n                        <div class=\"p-float-label\">\n                            <InputText id=\"externalSource\" v-model=\"externalSourceLink\" :disabled=\"!checked\" />\n                            <label for=\"externalSource\">externalSource*</label>\n                        </div>\n                    </div>\n\t\t\t\t\t<div class=\"field\">\n\t\t\t\t\t\t<label for=\"hasNotebook\">Has Notebook</label>\n\t\t\t\t\t\t<ToggleButton id=\"hasNotebook\" v-model=\"hasNotebook\"  onIcon=\"pi pi-check\" offIcon=\"pi pi-times\"/>\n\t\t\t\t\t</div>\n                    <Button type=\"submit\" label=\"Submit\" class=\"mt-2\" />\n                </form>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { required } from \"@vuelidate/validators\";\nimport { useVuelidate } from \"@vuelidate/core\";\n\nimport axios from \"axios\";\nimport router from \"../router\"\n\nimport { acteurStore } from '../stores/acteur'\n\nexport default {\n    setup: () => ({ v$: useVuelidate() }),\n    data() {\n        return {\n            name: '',\n            description: '',\n            format: null,\n\t\t\tselectedFolder: '',\n\t\t\tselectedDPs: [],\n\t\t\tchecked: false,\n\t\t\texternalSource: '',\n\t\t\thasNotebook: true,\n            submitted: false,\n            externalSourceLink: '',\n            formats: [{name: 'json', code: 'json'}, {name: 'csv', code: 'csv'}],\n\t\t\tdataProducts: [{name: 'historique disponibilite'}, {name: 'avis'}],\n            folders: null,\n            showMessage: false,\n            selectedNode: null,\n            acteur: acteurStore()\n        }\n    },\n    validations() {\n        return {\n            name: {\n                required\n            },\n            description: {\n                required\n            }\n        }\n    },\n    methods: {\n        handleSubmit(isFormValid) {\n            this.submitted = true;\n            //let folder = JSON.parse(JSON.stringify(this.selectedFolder))\n\n            if (!isFormValid) {\n                return;\n            }\n            \n            axios({\n                method: 'post',\n                url:  'http://ec2-54-161-217-174.compute-1.amazonaws.com:3000/dp/create-dp',\n                data: {\n                nom: this.name,\n                description: this.description,\n                formatData: this.format.code,\n                dateCreation: new Date(),\n                selectedFolder: this.selectedFolder,\n                selectedIds: this.selectedDPs.map(dp => dp._id),\n                isExternal: this.checked,\n                checked: this.hasNotebook,\n                hasNotebook: this.hasNotebook,\n                externalSourceLink: this.externalSourceLink\n                },\n                headers: {\n                authorization: \"JWT \" +  this.acteur.token\n                }\n            })\n            .then(() => this.toggleDialog())\n            .catch((error) => console.log(error));\n\n        },\n        toggleDialog() {\n            this.showMessage = !this.showMessage;\n        \n            if(!this.showMessage) {\n                this.resetForm();\n            }\n        },\n        resetForm() {\n            this.name = '';\n            this.submitted = false;\n        },\n        generateFolders(tree) {\n            let f = tree.children.map(c => this.generateFolders(c))\n            return {\n                label: tree.nom,\n                data: tree.nom,\n                key: tree._id,\n                children: f\n            }\n        },\n        onNodeSelect(node) {\n            this.selectedFolder = node.key\n        }\n    },\n    created() {\n        if (this.acteur.id == '') {\n            router.replace('/access')\n        }\n        axios({\n            method: 'get',\n            url: 'http://ec2-54-161-217-174.compute-1.amazonaws.com:3000/dp/get-my-dps',\n            headers: {\n            authorization: \"JWT \" + this.acteur.token\n        }\n        }).then((res) => {\n            this.folders = [this.generateFolders(res.data.tree)]\n            this.folders[0].label = \"root\"\n            this.selectedFolder = this.folders[0].key\n        }).catch((error) => console.log(error))\n\n        axios({\n            method: 'get',\n            url: 'http://ec2-54-161-217-174.compute-1.amazonaws.com:3000/dp/get-dps',\n        }).then((res) => {\n            this.dataProducts = res.data.dataProducts;\n        }).catch((error) => console.log(error));\n        }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.form-demo {\n    .card {\n        min-width: 450px;\n\n        form {\n            margin-top: 2rem;\n        }\n\n        .field {\n            margin-bottom: 1.5rem;\n        }\n    }\n\n    @media screen and (max-width: 960px) {\n        .card {\n            width: 80%;\n        }\n    }\n}\n\n</style>","import { render } from \"./FormLayoutDemo.vue?vue&type=template&id=14a5fc93&scoped=true\"\nimport script from \"./FormLayoutDemo.vue?vue&type=script&lang=js\"\nexport * from \"./FormLayoutDemo.vue?vue&type=script&lang=js\"\n\nimport \"./FormLayoutDemo.vue?vue&type=style&index=0&id=14a5fc93&lang=scss&scoped=true\"\n\nimport exportComponent from \"/home/nassim/data-mesh-prototype/vue-project/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-14a5fc93\"]])\n\nexport default __exports__"],"sourceRoot":""}