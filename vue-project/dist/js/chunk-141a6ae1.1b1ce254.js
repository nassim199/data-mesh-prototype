(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-141a6ae1"],{"7b53":function(e,t,o){"use strict";o("def1")},"7bbb":function(e,t,o){"use strict";o.r(t);var l=o("7a23");const a=e=>(Object(l["pushScopeId"])("data-v-14a5fc93"),e=e(),Object(l["popScopeId"])(),e),c={class:"form-demo"},d={class:"flex align-items-center flex-column pt-6 px-3"},s=a(()=>Object(l["createElementVNode"])("h5",null,"Data Product added successfully !",-1)),n={class:"flex justify-content-center"},i={class:"flex justify-content-center"},r={class:"card"},m=a(()=>Object(l["createElementVNode"])("h5",{class:"text-center"},"Add Data Product",-1)),b={class:"field"},p={class:"p-float-label"},u={key:0,class:"p-error"},h={class:"field"},j={class:"p-float-label"},O={key:0,class:"p-error"},v={class:"field"},V={class:"p-float-label"},f=a(()=>Object(l["createElementVNode"])("label",{for:"format"},"Format",-1)),N={class:"field"},k={class:"p-float-label"},g=a(()=>Object(l["createElementVNode"])("label",{for:"folder"},"Folder",-1)),E={class:"field"},$={class:"field"},S=a(()=>Object(l["createElementVNode"])("label",{for:"checked"},"External Source",-1)),w={class:"field"},x={class:"p-float-label"},C=a(()=>Object(l["createElementVNode"])("label",{for:"externalSource"},"externalSource*",-1)),y={class:"field"},D=a(()=>Object(l["createElementVNode"])("label",{for:"hasNotebook"},"Has Notebook",-1));function F(e,t,o,a,F,z){const P=Object(l["resolveComponent"])("Button"),U=Object(l["resolveComponent"])("Dialog"),I=Object(l["resolveComponent"])("InputText"),B=Object(l["resolveComponent"])("Textarea"),M=Object(l["resolveComponent"])("Dropdown"),L=Object(l["resolveComponent"])("TreeSelect"),T=Object(l["resolveComponent"])("MultiSelect"),_=Object(l["resolveComponent"])("ToggleButton");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",c,[Object(l["createVNode"])(U,{visible:F.showMessage,"onUpdate:visible":t[0]||(t[0]=e=>F.showMessage=e),breakpoints:{"960px":"80vw"},style:{width:"30vw"},position:"top"},{footer:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",n,[Object(l["createVNode"])(P,{label:"OK",onClick:z.toggleDialog,class:"p-button-text"},null,8,["onClick"])])]),default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",d,[Object(l["createElementVNode"])("i",{class:"pi pi-check-circle",style:Object(l["normalizeStyle"])({fontSize:"5rem",color:"var(--green-500)"})},null,4),s])]),_:1},8,["visible"]),Object(l["createElementVNode"])("div",i,[Object(l["createElementVNode"])("div",r,[m,Object(l["createElementVNode"])("form",{onSubmit:t[9]||(t[9]=Object(l["withModifiers"])(t=>z.handleSubmit(!e.v$.$invalid),["prevent"])),class:"p-fluid"},[Object(l["createElementVNode"])("div",b,[Object(l["createElementVNode"])("div",p,[Object(l["createVNode"])(I,{id:"name",modelValue:e.v$.name.$model,"onUpdate:modelValue":t[1]||(t[1]=t=>e.v$.name.$model=t),class:Object(l["normalizeClass"])({"p-invalid":e.v$.name.$invalid&&F.submitted})},null,8,["modelValue","class"]),Object(l["createElementVNode"])("label",{for:"name",class:Object(l["normalizeClass"])({"p-error":e.v$.name.$invalid&&F.submitted})},"Name*",2)]),e.v$.name.$invalid&&F.submitted||e.v$.name.$pending.$response?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",u,Object(l["toDisplayString"])(e.v$.name.required.$message.replace("Value","Name")),1)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",h,[Object(l["createElementVNode"])("div",j,[Object(l["createVNode"])(B,{id:"description",modelValue:e.v$.description.$model,"onUpdate:modelValue":t[2]||(t[2]=t=>e.v$.description.$model=t),class:Object(l["normalizeClass"])({"p-invalid":e.v$.description.$invalid&&F.submitted}),"aria-describedby":"description-error"},null,8,["modelValue","class"]),Object(l["createElementVNode"])("label",{for:"description",class:Object(l["normalizeClass"])({"p-error":e.v$.description.$invalid&&F.submitted})},"description*",2)]),e.v$.description.$invalid&&F.submitted||e.v$.description.$pending.$response?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",O,Object(l["toDisplayString"])(e.v$.description.required.$message.replace("Value","Name")),1)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",v,[Object(l["createElementVNode"])("div",V,[Object(l["createVNode"])(M,{id:"format",modelValue:F.format,"onUpdate:modelValue":t[3]||(t[3]=e=>F.format=e),options:F.formats,optionLabel:"name"},null,8,["modelValue","options"]),f])]),Object(l["createElementVNode"])("div",N,[Object(l["createElementVNode"])("div",k,[Object(l["createVNode"])(L,{id:"folder",modelValue:F.selectedNode,"onUpdate:modelValue":t[4]||(t[4]=e=>F.selectedNode=e),options:F.folders,onNodeSelect:z.onNodeSelect},null,8,["modelValue","options","onNodeSelect"]),g])]),Object(l["createElementVNode"])("div",E,[Object(l["createVNode"])(T,{id:"previous_dps",modelValue:F.selectedDPs,"onUpdate:modelValue":t[5]||(t[5]=e=>F.selectedDPs=e),options:F.dataProducts,filter:!0,optionLabel:"nom",placeholder:"Data Products Used"},null,8,["modelValue","options"])]),Object(l["createElementVNode"])("div",$,[S,Object(l["createVNode"])(_,{id:"checked",modelValue:F.checked,"onUpdate:modelValue":t[6]||(t[6]=e=>F.checked=e),onIcon:"pi pi-check",offIcon:"pi pi-times"},null,8,["modelValue"])]),Object(l["createElementVNode"])("div",w,[Object(l["createElementVNode"])("div",x,[Object(l["createVNode"])(I,{id:"externalSource",modelValue:F.externalSourceLink,"onUpdate:modelValue":t[7]||(t[7]=e=>F.externalSourceLink=e),disabled:!F.checked},null,8,["modelValue","disabled"]),C])]),Object(l["createElementVNode"])("div",y,[D,Object(l["createVNode"])(_,{id:"hasNotebook",modelValue:F.hasNotebook,"onUpdate:modelValue":t[8]||(t[8]=e=>F.hasNotebook=e),onIcon:"pi pi-check",offIcon:"pi pi-times"},null,8,["modelValue"])]),Object(l["createVNode"])(P,{type:"submit",label:"Submit",class:"mt-2"})],32)])])])}var z=o("e3e1"),P=o("25a0"),U=o("bc3a"),I=o.n(U),B=o("41cb"),M=o("08e0"),L={setup:()=>({v$:Object(P["a"])()}),data(){return{name:"",description:"",format:null,selectedFolder:"",selectedDPs:[],checked:!1,externalSource:"",hasNotebook:!0,submitted:!1,externalSourceLink:"",formats:[{name:"json",code:"json"},{name:"csv",code:"csv"}],dataProducts:[{name:"historique disponibilite"},{name:"avis"}],folders:null,showMessage:!1,selectedNode:null,acteur:Object(M["a"])()}},validations(){return{name:{required:z["b"]},description:{required:z["b"]}}},methods:{handleSubmit(e){this.submitted=!0,e&&I()({method:"post",url:"http://ec2-54-161-217-174.compute-1.amazonaws.com:3000/dp/create-dp",data:{nom:this.name,description:this.description,formatData:this.format.code,dateCreation:new Date,selectedFolder:this.selectedFolder,selectedIds:this.selectedDPs.map(e=>e._id),isExternal:this.checked,checked:this.hasNotebook,hasNotebook:this.hasNotebook,externalSourceLink:this.externalSourceLink},headers:{authorization:"JWT "+this.acteur.token}}).then(()=>this.toggleDialog()).catch(e=>console.log(e))},toggleDialog(){this.showMessage=!this.showMessage,this.showMessage||this.resetForm()},resetForm(){this.name="",this.submitted=!1},generateFolders(e){let t=e.children.map(e=>this.generateFolders(e));return{label:e.nom,data:e.nom,key:e._id,children:t}},onNodeSelect(e){this.selectedFolder=e.key}},created(){""==this.acteur.id&&B["a"].replace("/access"),I()({method:"get",url:"http://ec2-54-161-217-174.compute-1.amazonaws.com:3000/dp/get-my-dps",headers:{authorization:"JWT "+this.acteur.token}}).then(e=>{this.folders=[this.generateFolders(e.data.tree)],this.folders[0].label="root",this.selectedFolder=this.folders[0].key}).catch(e=>console.log(e)),I()({method:"get",url:"http://ec2-54-161-217-174.compute-1.amazonaws.com:3000/dp/get-dps"}).then(e=>{this.dataProducts=e.data.dataProducts}).catch(e=>console.log(e))}},T=(o("7b53"),o("6b0d")),_=o.n(T);const q=_()(L,[["render",F],["__scopeId","data-v-14a5fc93"]]);t["default"]=q},def1:function(e,t,o){}}]);
//# sourceMappingURL=chunk-141a6ae1.1b1ce254.js.map