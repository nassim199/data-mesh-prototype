(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0dab24"],{"6d66":function(e,t,o){"use strict";o.r(t);var a=o("7a23");const l={class:"grid"},c={class:"col-12"},d={class:"card"},n={class:"flex justify-content-between flex-column sm:flex-row"},i=Object(a["createElementVNode"])("h5",null,"Mes Data Products",-1),r={key:0},s={key:0},b={key:0,class:"flex justify-content-between"},p={key:1},u={key:0,class:"flex justify-content-between"},j={key:1},m={key:0,class:"flex justify-content-between"},O={key:1},h={key:1,class:"card"},k=Object(a["createElementVNode"])("h3",null,"Add new folder",-1),N=Object(a["createElementVNode"])("label",{for:"folderName",class:"block text-900 text-xl font-medium mb-2"},"Folder Name",-1),w=Object(a["createElementVNode"])("label",{class:"block text-900 text-xl font-medium mb-2"},"Parent Folder",-1),y=Object(a["createElementVNode"])("h3",null,"Data Lineage",-1),v=Object(a["createElementVNode"])("h3",null,"Downloads history",-1);function f(e,t,o,f,V,x){const g=Object(a["resolveComponent"])("Button"),D=Object(a["resolveComponent"])("Tree"),C=Object(a["resolveComponent"])("Divider"),P=Object(a["resolveComponent"])("AccordionTab"),_=Object(a["resolveComponent"])("Accordion"),E=Object(a["resolveComponent"])("Card"),B=Object(a["resolveComponent"])("InputText"),T=Object(a["resolveComponent"])("TreeSelect"),F=Object(a["resolveComponent"])("Dialog"),L=Object(a["resolveComponent"])("DataLineage"),S=Object(a["resolveComponent"])("Chart");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",l,[Object(a["createElementVNode"])("div",c,[Object(a["createElementVNode"])("div",d,[Object(a["createElementVNode"])("div",n,[i,Object(a["createVNode"])(g,{icon:"pi pi-plus",label:"Add Folder",onClick:x.addFolderDialog,class:"mb-2"},null,8,["onClick"])]),Object(a["createVNode"])(D,{value:V.dataProductsTree,selectionMode:"single",selectionKeys:V.selectedDP,"onUpdate:selectionKeys":t[0]||(t[0]=e=>V.selectedDP=e),onNodeSelect:x.onNodeSelect,onNodeUnselect:x.onNodeUnselect},null,8,["value","selectionKeys","onNodeSelect","onNodeUnselect"])]),Object(a["createElementVNode"])("div",null,[V.dataProduct?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",r,[Object(a["createVNode"])(E,null,{title:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(V.dataProduct.nom),1)]),content:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(V.dataProduct.description)+" ",1),Object(a["createVNode"])(C),Object(a["createTextVNode"])(" Format data : "+Object(a["toDisplayString"])(V.dataProduct.formatData)+" ",1),Object(a["createVNode"])(C),Object(a["createTextVNode"])(" Date creation : "+Object(a["toDisplayString"])(V.dataProduct.dateCreation)+" ",1),Object(a["createVNode"])(C),V.dataProduct.dataAvailable?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",s,[Object(a["createTextVNode"])(" Volume : "+Object(a["toDisplayString"])(V.dataProduct.formatData/1024)+" ko ",1),Object(a["createVNode"])(C),Object(a["createTextVNode"])(" Date Maj : "+Object(a["toDisplayString"])(V.dataProduct.derniereMAJ)+" ",1),Object(a["createVNode"])(C)])):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])(_,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(P,{header:"Lien de telechargement"},{default:Object(a["withCtx"])(()=>[V.dataProduct.dataAvailable||V.dataProduct.isExternal?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",b,[Object(a["createElementVNode"])("div",null,Object(a["toDisplayString"])(x.download_link),1),Object(a["createVNode"])(g,{label:"copy",class:"pi pi-copy",onClick:t[1]||(t[1]=()=>{x.copyURL(x.download_link)})})])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",p,"No data available"))]),_:1}),Object(a["createVNode"])(P,{header:"Lien Upload"},{default:Object(a["withCtx"])(()=>[V.dataProduct.isExternal?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",j,"Data is external")):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",u,[Object(a["createElementVNode"])("div",null,Object(a["toDisplayString"])(x.upload_link),1),Object(a["createVNode"])(g,{label:"copy",class:"pi pi-copy",onClick:t[2]||(t[2]=()=>{x.copyURL(x.upload_link)})})]))]),_:1}),Object(a["createVNode"])(P,{header:"Lien notebook"},{default:Object(a["withCtx"])(()=>[V.dataProduct.hasNotebook?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",m,[Object(a["createElementVNode"])("div",null,Object(a["toDisplayString"])(x.notebook_link),1),Object(a["createVNode"])(g,{label:"open",class:"pi pi-window-maximize",onClick:t[3]||(t[3]=e=>x.openUrl(x.notebook_link))})])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",O,"No Notebook"))]),_:1})]),_:1})]),footer:Object(a["withCtx"])(()=>[Object(a["createVNode"])(g,{label:"Data Lineage",onClick:x.showDataLineage},null,8,["onClick"]),Object(a["createVNode"])(g,{label:"Download History",onClick:t[4]||(t[4]=()=>{V.displayDownloads=!0}),style:{"margin-left":"0.5em"}})]),_:1})])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",h,"No data product selected"))])]),Object(a["createVNode"])(F,{visible:V.displayDialog,"onUpdate:visible":t[9]||(t[9]=e=>V.displayDialog=e),modal:!0,position:"right",breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"50vw"}},{header:Object(a["withCtx"])(()=>[k]),footer:Object(a["withCtx"])(()=>[Object(a["createVNode"])(g,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:t[8]||(t[8]=()=>{V.displayDialog=!1})}),Object(a["createVNode"])(g,{label:"Add",icon:"pi pi-plus",onClick:x.addFolder},null,8,["onClick"])]),default:Object(a["withCtx"])(()=>[N,Object(a["createVNode"])(B,{id:"folderName",modelValue:V.folderName,"onUpdate:modelValue":t[5]||(t[5]=e=>V.folderName=e),type:"text",class:"w-full mb-3",placeholder:"Folder Name",style:{padding:"1rem"}},null,8,["modelValue"]),w,Object(a["createVNode"])(T,{modelValue:V.selectedNode,"onUpdate:modelValue":t[6]||(t[6]=e=>V.selectedNode=e),options:V.folders,placeholder:"Select Folder",onSelectNode:t[7]||(t[7]=e=>{V.selectedFolder=e.key})},null,8,["modelValue","options"])]),_:1},8,["visible"]),Object(a["createVNode"])(F,{visible:V.displayDataLineage,"onUpdate:visible":t[11]||(t[11]=e=>V.displayDataLineage=e),modal:!0,breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"50vw"}},{header:Object(a["withCtx"])(()=>[y]),footer:Object(a["withCtx"])(()=>[Object(a["createVNode"])(g,{label:"Hide",icon:"pi pi-times",class:"p-button-text",onClick:t[10]||(t[10]=()=>{V.displayDataLineage=!1})})]),default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(L,{dp:x.dp_id},null,8,["dp"])]),_:1},8,["visible"]),Object(a["createVNode"])(F,{visible:V.displayDownloads,"onUpdate:visible":t[13]||(t[13]=e=>V.displayDownloads=e),modal:!0,breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"50vw"}},{header:Object(a["withCtx"])(()=>[v]),footer:Object(a["withCtx"])(()=>[Object(a["createVNode"])(g,{label:"Hide",icon:"pi pi-times",class:"p-button-text",onClick:t[12]||(t[12]=()=>{V.displayDownloads=!1})})]),default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(S,{type:"line",data:x.download_history,options:V.options},null,8,["data","options"])]),_:1},8,["visible"])])}var V=o("bc3a"),x=o.n(V),g=o("08e0"),D=o("41cb"),C=o("c847"),P={data(){return{folders:null,dataProductsTree:null,dataProducts:{},dataProduct:null,displayDialog:!1,folderName:"",selectedFolder:null,selectedNode:null,selectedDP:null,acteur:Object(g["a"])(),displayDataLineage:!1,displayDownloads:!1,options:{plugins:{legend:{labels:{color:"#495057"}}},scales:{x:{ticks:{color:"#495057"},grid:{color:"#ebedef"}},y:{ticks:{color:"#495057"},grid:{color:"#ebedef"}}}}}},nodeService:null,created(){""==this.acteur.id&&D["a"].replace("/access"),x()({method:"get",url:"http://ec2-54-161-217-174.compute-1.amazonaws.com:3000/dp/get-my-dps",headers:{authorization:"JWT "+this.acteur.token}}).then(e=>{this.dataProductsTree=this.createTree(e.data.tree).children,this.folders=[this.generateFolders(e.data.tree)],this.folders[0].label="root",this.selectedFolder=this.folders[0].key,console.log(this.folders)}).catch(e=>console.log(e))},methods:{onNodeSelect(e){this.dataProduct=e.data},onNodeUnselect(){this.dataProduct=null},showDataLineage(){this.displayDataLineage=!0},addFolderDialog(){this.displayDialog=!0},addFolder(){x()({method:"post",url:"http://ec2-54-161-217-174.compute-1.amazonaws.com:3000/dp/create-folder",data:{folderId:this.selectedFolder,nom:this.folderName},headers:{authorization:"JWT "+this.acteur.token}}).then(()=>{this.displayDialog=!1}).catch(e=>console.log(e))},generateFolders(e){let t=e.children.map(e=>this.generateFolders(e));return{label:e.nom,data:e.nom,key:e._id,children:t}},createTree(e){let t=e.children.map(e=>this.createTree(e));return t=[...t,...e.dataProducts.map(e=>({label:e.nom,data:e,key:e._id,selectable:!0}))],{label:e.nom,data:e.nom,key:e._id,children:t,icon:"pi pi-fw pi-folder",selectable:!1}},async copyURL(e){try{await navigator.clipboard.writeText(e)}catch(t){alert("Cannot copy")}},openUrl(e){window.open(e,"_blank")}},computed:{dp_id(){return this.dataProduct?this.dataProduct._id:""},download_history(){if(this.dataProduct){let e=Date.now()-6048e5,t=this.dataProduct.downloads.map(e=>Date.parse(e)).filter(t=>t>=e).map(t=>Math.floor((t-e)/864e5)),o=[0,0,0,0,0,0,0];return t.forEach(e=>{o[e]+=1}),{labels:["j-7","j-6","j-5","j-4","j-3","j-2","j-1"],datasets:[{label:"Downloads",data:o,fill:!1,borderColor:"#42A5F5",tension:.4}]}}return null},download_link(){return`http://ec2-54-161-217-174.compute-1.amazonaws.com:3000/data/${this.dataProduct._id}/get_data`},upload_link(){return`http://ec2-54-161-217-174.compute-1.amazonaws.com:3000/data/${this.dataProduct._id}/upload_data`},notebook_link(){return"http://ec2-54-161-217-174.compute-1.amazonaws.com:8090/next/#/notebook/"+this.dataProduct.notebookId}},components:{DataLineage:C["a"]}},_=o("6b0d"),E=o.n(_);const B=E()(P,[["render",f]]);t["default"]=B}}]);
//# sourceMappingURL=chunk-2d0dab24.dfebbc34.js.map