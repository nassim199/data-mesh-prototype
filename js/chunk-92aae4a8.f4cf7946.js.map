{"version":3,"sources":["webpack:///./src/components/TableDemo.vue?7833","webpack:///./src/components/TableDemo.vue","webpack:///./src/components/TableDemo.vue?6165"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_4","_createVNode","_component_DataTable","value","$data","expandedRows","$event","dataKey","responsiveLayout","paginator","rows","rowHover","filters","filterDisplay","loading","globalFilterFields","header","_component_Button","icon","label","onClick","$options","_hoisted_7","_component_InputText","placeholder","style","empty","expansion","slotProps","data","description","_hoisted_11","_hoisted_12","_toDisplayString","dateCreation","_hoisted_13","dataAvailable","_hoisted_14","formatData","_hoisted_15","derniereMAJ","_hoisted_16","isExternal","_hoisted_18","_id","downloads","_component_Column","expander","headerStyle","field","sortable","body","nom","owner","_component_Dialog","visible","modal","breakpoints","width","_hoisted_19","footer","_component_DataLineage","dp","_hoisted_20","_component_Chart","type","options","filters1","loading1","dataProducts","dp_id","displayDataLineage","displayDownloads","plugins","legend","labels","color","scales","x","ticks","grid","y","created","this","initFilters1","axios","method","url","then","res","catch","error","console","log","methods","global","matchMode","FilterMatchMode","CONTAINS","name","operator","FilterOperator","AND","constraints","STARTS_WITH","clearFilter1","expandAll","products","filter","p","id","collapseAll","formatDate","toLocaleDateString","day","month","year","download_link","mytext","navigator","clipboard","writeText","$e","alert","computed","download_history","date","Date","now","result","map","d","parse","Math","floor","forEach","datasets","fill","borderColor","tension","components","DataLineage","__exports__","render"],"mappings":"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","file":"js/chunk-92aae4a8.f4cf7946.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./TableDemo.vue?vue&type=style&index=0&id=57080df4&scoped=true&lang=scss\"","<template>\n  <div class=\"grid\">\n    <div class=\"col-12\">\n      <div class=\"card\">\n        <h5>Row Expand</h5>\n        <DataTable\n          :value=\"dataProducts\"\n          v-model:expandedRows=\"expandedRows\"\n          dataKey=\"_id\"\n          responsiveLayout=\"scroll\"\n          :paginator=\"true\"\n          :rows=\"10\"\n          :rowHover=\"true\"\n          v-model:filters=\"filters1\"\n          filterDisplay=\"menu\"\n          :loading=\"loading1\"\n          :filters=\"filters1\"\n          :globalFilterFields=\"['name']\"\n        >\n          <template #header>\n            <div class=\"flex justify-content-between flex-column sm:flex-row\">\n              <Button\n                icon=\"pi pi-minus\"\n                label=\"Collapse All\"\n                @click=\"collapseAll\"\n                class=\"mb-2\"\n              /><span class=\"p-input-icon-left mb-2\">\n                <i class=\"pi pi-search\" />\n                <InputText\n                  v-model=\"filters1['global'].value\"\n                  placeholder=\"Keyword Search\"\n                  style=\"width: 100%\"\n                />\n              </span>\n            </div>\n          </template>\n          <template #empty> No data products found. </template>\n          <template #loading> Loading data products. Please wait. </template>\n\n          <Column :expander=\"true\" headerStyle=\"width: 3rem\" />\n          <Column field=\"nom\" header=\"Name\" :sortable=\"true\">\n            <template #body=\"slotProps\">\n              {{ slotProps.data.nom }}\n            </template>\n          </Column>\n          <Column field=\"owner.nom\" header=\"Acteur\" :sortable=\"true\">\n            <template #body=\"slotProps\">\n              {{ slotProps.data.owner.nom }}\n            </template>\n          </Column>\n          <Column field=\"formatData\" header=\"Format\" :sortable=\"true\">\n            <template #body=\"slotProps\">\n              {{ slotProps.data.formatData }}\n            </template></Column\n          >\n\n          <template #expansion=\"slotProps\">\n            <div class=\"p-3\">\n              {{ slotProps.data.description }}\n              <br />\n              <br />\n              Date creation : {{ slotProps.data.dateCreation }}\n              <br />\n              <div v-if=\"slotProps.data.dataAvailable\">\n                Volume : {{ slotProps.data.formatData / 1024 }} ko\n                <br />\n                Date Maj : {{ slotProps.data.derniereMAJ }}\n              </div>\n              <br />\n              <div\n                v-if=\"slotProps.data.dataAvailable || slotProps.data.isExternal\"\n                class=\"flex justify-content-between\"\n              >\n                <div>Lien : {{ download_link(slotProps.data) }}</div>\n                <Button\n                  label=\"copy\"\n                  class=\"pi pi-copy\"\n                  @click=\"\n                    () => {\n                      copyURL(download_link(slotProps.data));\n                    }\n                  \"\n                ></Button>\n              </div>\n              <div v-else>No data available</div>\n              <div>\n                <Button\n                  label=\"Data Lineage\"\n                  @click=\"\n                    () => {\n                      dp_id = slotProps.data._id;\n                      displayDataLineage = true;\n                    }\n                  \"\n                />\n                <Button\n                  label=\"Download History\"\n                  @click=\"\n                    () => {\n                      downloads = slotProps.data.downloads;\n                      displayDownloads = true;\n                    }\n                  \"\n                  style=\"margin-left: 0.5em\"\n                />\n              </div>\n            </div>\n          </template>\n        </DataTable>\n        <Dialog\n          v-model:visible=\"displayDataLineage\"\n          :modal=\"true\"\n          :breakpoints=\"{ '960px': '75vw', '640px': '90vw' }\"\n          :style=\"{ width: '50vw' }\"\n        >\n          <template #header>\n            <h3>Data Lineage</h3>\n          </template>\n          <DataLineage :dp=\"dp_id\" />\n          <template #footer>\n            <Button\n              label=\"Hide\"\n              icon=\"pi pi-times\"\n              class=\"p-button-text\"\n              @click=\"\n                () => {\n                  displayDataLineage = false;\n                }\n              \"\n            />\n          </template>\n        </Dialog>\n        <Dialog\n          v-model:visible=\"displayDownloads\"\n          :modal=\"true\"\n          :breakpoints=\"{ '960px': '75vw', '640px': '90vw' }\"\n          :style=\"{ width: '50vw' }\"\n        >\n          <template #header>\n            <h3>Downloads history</h3>\n          </template>\n          <Chart type=\"line\" :data=\"download_history\" :options=\"options\" />\n          <template #footer>\n            <Button\n              label=\"Hide\"\n              icon=\"pi pi-times\"\n              class=\"p-button-text\"\n              @click=\"\n                () => {\n                  displayDownloads = false;\n                }\n              \"\n            />\n          </template>\n        </Dialog>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { FilterMatchMode, FilterOperator } from \"primevue/api\";\nimport axios from \"axios\";\nimport DataLineage from \"./DataLineage\";\n\nexport default {\n  data() {\n    return {\n      filters1: null,\n      loading1: true,\n      dataProducts: null,\n      expandedRows: [],\n      dp_id: \"\",\n      downloads: [],\n      displayDataLineage: false,\n      displayDownloads: false,\n      options: {\n        plugins: {\n          legend: {\n            labels: {\n              color: \"#495057\",\n            },\n          },\n        },\n        scales: {\n          x: {\n            ticks: {\n              color: \"#495057\",\n            },\n            grid: {\n              color: \"#ebedef\",\n            },\n          },\n          y: {\n            ticks: {\n              color: \"#495057\",\n            },\n            grid: {\n              color: \"#ebedef\",\n            },\n          },\n        },\n      },\n    };\n  },\n  created() {\n    this.initFilters1();\n    axios({\n      method: \"get\",\n      url: \"http://ec2-54-161-217-174.compute-1.amazonaws.com:3000/dp/get-dps\",\n    })\n      .then((res) => {\n        this.dataProducts = res.data.dataProducts;\n        this.loading1 = false;\n      })\n      .catch((error) => console.log(error));\n  },\n  methods: {\n    initFilters1() {\n      this.filters1 = {\n        global: { value: null, matchMode: FilterMatchMode.CONTAINS },\n        name: {\n          operator: FilterOperator.AND,\n          constraints: [\n            { value: null, matchMode: FilterMatchMode.STARTS_WITH },\n          ],\n        },\n      };\n    },\n    clearFilter1() {\n      this.initFilters1();\n    },\n    expandAll() {\n      this.expandedRows = this.products.filter((p) => p.id);\n    },\n    collapseAll() {\n      this.expandedRows = null;\n    },\n    formatDate(value) {\n      return value.toLocaleDateString(\"en-US\", {\n        day: \"2-digit\",\n        month: \"2-digit\",\n        year: \"numeric\",\n      });\n    },\n    download_link(dp) {\n      return `http://ec2-54-161-217-174.compute-1.amazonaws.com:3000/data/${dp._id}/get_data`;\n    },\n    async copyURL(mytext) {\n      try {\n        await navigator.clipboard.writeText(mytext);\n      } catch ($e) {\n        alert(\"Cannot copy\");\n      }\n    },\n  },\n  computed: {\n    download_history() {\n      if (this.downloads) {\n        let date = Date.now() - 24 * 60 * 60 * 1000 * 7;\n        let result = [0, 0, 0, 0, 0, 0, 0];\n        this.downloads\n          .map((d) => Date.parse(d))\n          .filter((d) => d >= date)\n          .map((d) => Math.floor((d - date) / (24 * 60 * 60 * 1000)))\n          .forEach((d) => {\n            result[d] += 1;\n          });\n\n        return {\n          labels: [\"j-7\", \"j-6\", \"j-5\", \"j-4\", \"j-3\", \"j-2\", \"j-1\"],\n          datasets: [\n            {\n              label: \"Downloads\",\n              data: result,\n              fill: false,\n              borderColor: \"#42A5F5\",\n              tension: 0.4,\n            },\n          ],\n        };\n      } else {\n        return null;\n      }\n    },\n  },\n  components: {\n    DataLineage: DataLineage,\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import \"../assets/demo/badges.scss\";\n\n::v-deep(.p-datatable-frozen-tbody) {\n  font-weight: bold;\n}\n\n::v-deep(.p-datatable-scrollable .p-frozen-column) {\n  font-weight: bold;\n}\n</style>\n","import { render } from \"./TableDemo.vue?vue&type=template&id=57080df4&scoped=true\"\nimport script from \"./TableDemo.vue?vue&type=script&lang=js\"\nexport * from \"./TableDemo.vue?vue&type=script&lang=js\"\n\nimport \"./TableDemo.vue?vue&type=style&index=0&id=57080df4&scoped=true&lang=scss\"\n\nimport exportComponent from \"/home/nassim/data-mesh-prototype/vue-project/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-57080df4\"]])\n\nexport default __exports__"],"sourceRoot":""}